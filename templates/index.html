
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Nutrition Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to right, #eafaf1, #f8f9fa);
            color: #343a40;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #28a745;
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        h1 {
            margin: 0;
            font-size: 2rem;
            font-weight: 600;
        }
        .container {
            max-width: 850px;
            margin: 40px auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        form {
            margin-bottom: 20px;
        }
        label {
            font-weight: 600;
            display: block;
            margin: 15px 0 5px;
        }
        input[type="text"],
        input[type="file"] {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 1px solid #ced4da;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        input[type="text"]:focus,
        input[type="file"]:focus {
            border-color: #28a745;
            outline: none;
            box-shadow: 0 0 5px rgba(40, 167, 69, 0.3);
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        button:hover {
            background-color: #218838;
            transform: scale(1.03);
        }
        .nutrition-info {
            margin-top: 25px;
            padding: 20px;
            border-left: 4px solid #28a745;
            background-color: #f9fdf9;
            border-radius: 8px;
        }
        .nutrition-info h2 {
            color: #28a745;
            margin-top: 0;
        }
        .nutrition-info h3 {
            margin-top: 20px;
            margin-bottom: 10px;
            color: #28a745;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
        }

        .nutrition-info ul {
            margin: 10px 0 20px 20px;
            padding-left: 20px;
        }

        .nutrition-info li {
            margin: 5px 0;
        }

        .nutrition-info p, 
        .nutrition-info div {
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .footer {
            text-align: center;
            margin: 30px auto 20px;
            font-size: 0.9em;
            color: #6c757d;
            max-width: 800px;
            padding: 10px;
        }
        /* Loading overlay */
        .loading-overlay {
            display: none;  
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.9);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            }

        .spinner {
            border: 6px solid #f3f3f3;
            border-top: 6px solid #28a745;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            100% { transform: rotate(360deg); }
        }
        .loading-text {
            margin-top: 15px;
            font-size: 1.1rem;
            color: #343a40;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <header>
        <h1>Food Nutrition Analysis</h1>
    </header>

    
    <div id="loading" class="loading-overlay">
        <div class="spinner"></div>
        <p>Analyzing your food image, please wait...</p>
    </div>


    <div class="container">
        <form id="nutritionForm" action="{{ url_for('image_text_nutrition') }}" method="POST" enctype="multipart/form-data">
            <label for="user_query">Enter your query:</label>
            <input type="text" id="user_query" name="user_query" required>
            <br><br>
            <label for="file">Upload an image of food:</label>
            <input type="file" id="file" name="file" accept="image/*" required>
            <br><br>
            <button type="submit">Analyze</button>
        </form>
    
        <form action="{{ url_for('text_nutrition') }}">
                <button type="submit">Go to Text-Based Nutrition Query</button>
        </form>

        <div class="nutrition-info">
            <h2>Nutritional Information</h2>
            <p><strong>User Query:</strong> {{ user_query }}</p>
            <div>{{ response|safe }}</div>
        </div>
    </div>

    <div class="footer">
        <p>
            The nutritional information and calorie estimates provided are approximate and are based on general food data. 
            Actual values may vary depending on factors such as portion size, specific ingredients, preparation methods, and individual variations. 
            For precise dietary advice or medical guidance, consult a qualified nutritionist or healthcare provider.
        </p>
    </div>

    <script>
        const form = document.getElementById("nutritionForm");
        const loading = document.getElementById("loading");

        form.addEventListener("submit", function () {
            // Show loading overlay when form is submitted
            loading.style.display = "flex";
        });
    </script>
</body>

</html>
